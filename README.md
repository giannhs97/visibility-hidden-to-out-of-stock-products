I have used the above codes snippets to set visibility hidden for products that are out of stock, don't have a specific tag and are not already hidden. Also i have added a functionality to allow the main function to execute
using a cron job.
